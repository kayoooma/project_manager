<!doctype html>
<html lang="ru" data-palette="aurora" data-pattern="aurora">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <title>Комил Султонов — IT Project Manager (финтех, AI/ML)</title>
  <meta name="description" content="Управляю полным циклом проекта: от идеи и требований до релиза и сопровождения. Платёжные интеграции (YooKassa, Payme), автоконвертация валют, продуктовые метрики (DAU/MAU/retention/churn/ARPU/CR), расчёт LTV/ROAS до запуска. Автоматизация на AI‑моделях и Python." />
  <meta name="theme-color" content="#0b0d10" />
  <meta property="og:title" content="Комил Султонов — IT Project Manager" />
  <meta property="og:description" content="Финтех, AI/ML, продуктовые метрики и автоматизация. Управление кросс‑функциональными командами и релизами." />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="https://kayoooma.github.io/project_manager/assets/og-cover-project-manager.jpg" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />
  <meta property="og:image:alt" content="Комил Султонов — IT Project Manager" />
  <meta property="og:url" content="https://kayoooma.github.io/project_manager/" />
  <link rel="canonical" href="https://kayoooma.github.io/project_manager/" />
  <link rel="alternate" href="https://kayoooma.github.io/project_manager/" hreflang="ru" />
  <link rel="alternate" href="https://kayoooma.github.io/project_manager/en/" hreflang="en" />
  <link rel="alternate" href="https://kayoooma.github.io/project_manager/" hreflang="x-default" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Комил Султонов — IT Project Manager" />
  <meta name="twitter:description" content="Финтех, AI/ML, продуктовые метрики и автоматизация. Управление кросс‑функциональными командами и релизами." />
  <meta name="twitter:image" content="https://kayoooma.github.io/project_manager/assets/og-cover-project-manager.jpg" />
  <!-- Favicon / tab icon -->
  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'%3E%3Cdefs%3E%3ClinearGradient id='g' x1='0' y1='0' x2='1' y2='1'%3E%3Cstop offset='0' stop-color='%23f8fafc'/%3E%3Cstop offset='0.5' stop-color='%23cbd5e1'/%3E%3Cstop offset='1' stop-color='%2394a3b8'/%3E%3C/linearGradient%3E%3C/defs%3E%3Crect x='6' y='6' width='52' height='52' rx='14' fill='%230b0d12'/%3E%3Cpath d='M20 44 L44 20 M44 20 L44 34 M44 20 L30 20' stroke='url(%23g)' stroke-width='6' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E"/>
  <link rel="apple-touch-icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'%3E%3Cdefs%3E%3ClinearGradient id='g' x1='0' y1='0' x2='1' y2='1'%3E%3Cstop offset='0' stop-color='%23f8fafc'/%3E%3Cstop offset='0.5' stop-color='%23cbd5e1'/%3E%3Cstop offset='1' stop-color='%2394a3b8'/%3E%3C/linearGradient%3E%3C/defs%3E%3Crect x='6' y='6' width='52' height='52' rx='14' fill='%230b0d12'/%3E%3Cpath d='M20 44 L44 20 M44 20 L44 34 M44 20 L30 20' stroke='url(%23g)' stroke-width='6' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E"/>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;600&display=swap" rel="stylesheet">
  <style>
    :root{ --bg:#0b0d10; --panel:#0f1216; --muted:#8592a3; --text:#e7eaf0; --line:#1a1f26; --accent:#67e8f9; --accent-2:#86efac; --radius:20px; --shadow:0 10px 30px rgba(0,0,0,.35), 0 1px 0 rgba(255,255,255,.02) inset }
    html[data-palette="aurora"]{ --bg:#0b0d10; --panel:#0f1216; --muted:#8592a3; --text:#e7eaf0; --line:#1a1f26; --accent:#67e8f9; --accent-2:#86efac }
    html[data-palette="pink"]{ --bg:#070509; --panel:#0d0a10; --muted:#a7a0ad; --text:#fff7fb; --line:#1a1220; --accent:#ff4dd2; --accent-2:#60a5fa }
    html[data-palette="royal"]{ --bg:#0a0711; --panel:#0f0a19; --muted:#b2a7c7; --text:#f7f5ff; --line:#1b1326; --accent:#c084fc; --accent-2:#facc15 }
    html[data-palette="graphite"]{ --bg:#0d0f12; --panel:#111418; --muted:#9aa4b2; --text:#e9edf3; --line:#1b2129; --accent:#94a3b8; --accent-2:#111827 }
    html[data-palette="glass"]{ --bg:#07090c; --panel:rgba(13,17,22,.62); --muted:#b4c1cf; --text:#f4f7fb; --line:rgba(255,255,255,.10); --accent:#9ae6ff; --accent-2:#b9fbc0 }
/* Улучшаем читаемость в Black + Glass */
html[data-palette="glass"] .subtitle, html[data-palette="glass"] .p, html[data-palette="glass"] .label{ color:#eaf2ff; opacity:.98 }
html[data-palette="glass"] .menu{ background:rgba(7,9,12,.94) !important; border-color:rgba(255,255,255,.08); box-shadow:0 20px 50px rgba(0,0,0,.55), inset 0 1px rgba(255,255,255,.04) }
html[data-palette="glass"] .hero::before{ content:""; position:absolute; inset:0; pointer-events:none; background:radial-gradient(1000px 320px at 40% -10%, rgba(0,0,0,.38), transparent 60%), linear-gradient(180deg, rgba(0,0,0,.22), rgba(0,0,0,0) 30%); z-index:0 }
    html[data-palette="gold"]{ --bg:#060608; --panel:#0b0d12; --muted:#b7b09a; --text:#fff9e6; --line:#1a1f26; --accent:#f6c453; --accent-2:#f59e0b }
    html[data-palette="silver-dark"]{ --bg:#0a0b0e; --panel:#0f1216; --muted:#b5beca; --text:#eef2f6; --line:#222733; --accent:#e5e9ef; --accent-2:#b8c2cf }
    html[data-palette="silver-light"]{ --bg:#f6f8fc; --panel:#ffffff; --muted:#4b5563; --text:#0b1220; --line:#ccd3dc; --accent:#a9b4c2; --accent-2:#7a8594 }
    *{box-sizing:border-box} html,body{height:100%} body{margin:0; background:var(--bg); color:var(--text); font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,'Helvetica Neue',Arial,'Noto Sans',sans-serif; line-height:1.6; letter-spacing:.2px; overflow-x:hidden}
    a{color:inherit; text-decoration:none} img{max-width:100%; display:block} .container{width:min(1120px, 92vw); margin:0 auto}
    ul{padding-left:1.2em; margin:.6em 0 .2em} li{margin:.35em 0; line-height:1.55; overflow-wrap:anywhere; hyphens:auto}
    .nav{position:sticky; top:0; z-index:70; backdrop-filter:saturate(120%) blur(8px); background:linear-gradient(to bottom, color-mix(in oklab, var(--panel) 92%, transparent), color-mix(in oklab, var(--panel) 76%, transparent)); border-bottom:1px solid var(--line)}
    .nav-inner{display:flex; align-items:center; justify-content:space-between; padding:12px 0}
    .logo{display:flex; gap:12px; align-items:center}
    .badge{display:inline-flex; align-items:center; gap:6px; font:600 12px/1 Inter; letter-spacing:.6px; text-transform:uppercase; color:var(--muted); background:color-mix(in oklab, var(--panel) 92%, transparent); border:1px solid var(--line); padding:6px 10px; border-radius:999px}
    .menu{display:flex; gap:22px; align-items:center} .menu a{color:var(--muted); font-weight:500; opacity:.95} .menu a:hover{color:var(--text)}
    .lang-switch{display:flex; align-items:center; gap:8px; margin-left:8px; color:var(--muted); font:600 12px/1 Inter}
    .lang-switch a{padding:6px 8px; border-radius:999px; border:1px solid var(--line); background:color-mix(in oklab, var(--panel) 92%, transparent)}
    .lang-switch a.active{color:var(--text); border-color:color-mix(in oklab, var(--accent) 40%, var(--line)); box-shadow:0 0 0 2px color-mix(in oklab, var(--accent) 12%, transparent) inset}
    @media (max-width:960px){ .lang-switch{margin-top:6px} }
    .cta{--pad:14px 18px; display:inline-flex; align-items:center; gap:10px; padding:var(--pad); border-radius:14px; border:1px solid var(--line); background:linear-gradient(180deg, color-mix(in oklab, var(--panel) 98%, transparent), color-mix(in oklab, var(--panel) 94%, transparent)); box-shadow:var(--shadow); position:relative; overflow:hidden}
    .cta span{font-weight:600}
    .cta::after{content:""; position:absolute; inset:0; background:radial-gradient(600px 160px at var(--mx,50%) -20%, color-mix(in oklab, var(--accent) 38%, transparent), transparent 60%); transition:200ms ease}
    .cta:hover{transform:translateY(-1px)} .cta .dot{width:9px; height:9px; background:var(--accent); border-radius:50%; box-shadow:0 0 22px color-mix(in oklab, var(--accent) 80%, transparent)}
    html[data-palette="silver-light"] .cta, html[data-palette="silver-dark"] .cta{ color:var(--text); background:linear-gradient(180deg, rgba(255,255,255,.85), rgba(255,255,255,.25) 38%, rgba(0,0,0,.08) 72%), linear-gradient(110deg, #f6f7f9 0%, #e3e7ed 18%, #fbfcfd 36%, #cfd6df 52%, #f6f7f9 68%, #dde3ea 84%, #fbfcfd 100%); border:1px solid color-mix(in oklab, var(--accent) 55%, #ffffff); box-shadow:0 8px 20px rgba(0,0,0,.10), inset 0 1px rgba(255,255,255,.85), inset 0 -1px rgba(0,0,0,.18) }
    html[data-palette="silver-light"] .cta::before, html[data-palette="silver-dark"] .cta::before{ content:""; position:absolute; left:-25%; top:-220%; width:40%; height:540%; background:linear-gradient(75deg, transparent 0, rgba(255,255,255,.55) 46%, transparent 64%); transform:rotate(10deg); transition:left .45s ease }
    html[data-palette="silver-light"] .cta:hover::before, html[data-palette="silver-dark"] .cta:hover::before{ left:120% }
    html[data-palette="silver-dark"] .cta, html[data-palette="silver-dark"] .cta span{ color:#0b1220 !important; text-shadow:none }
    html[data-palette="silver-light"] .subtitle{ color:#1f2937; opacity:0.92 } html[data-palette="silver-light"] .p{ color:#334155 } html[data-palette="silver-light"] .label{ color:#475569 }
    html[data-palette="silver-light"] .hero{ background: radial-gradient(1200px 380px at 10% -10%, color-mix(in oklab, var(--accent) 16%, transparent), transparent 65%), radial-gradient(900px 300px at 110% 110%, color-mix(in oklab, var(--accent-2) 12%, transparent), transparent 60%), var(--bg) }
    .menu-toggle{display:none; background:transparent; border:1px solid var(--line); border-radius:12px; padding:8px 12px; color:var(--muted)} .menu-toggle svg{display:block} .menu.open{display:flex} body.menu-open{overflow:hidden}
    @media (max-width:960px){ .badge{display:none} .menu{display:none; position:fixed; left:max(4vw,12px); right:max(4vw,12px); top:64px; padding:14px; border:1px solid var(--line); border-radius:16px; background:linear-gradient(180deg, color-mix(in oklab, var(--panel) 98%, transparent), color-mix(in oklab, var(--panel) 92%, transparent)); box-shadow:var(--shadow); gap:10px; flex-direction:column} .menu .cta{justify-content:center} .menu-toggle{display:inline-flex; align-items:center; gap:8px} }
    .layer{position:fixed; inset:0; pointer-events:none; display:none}
    html[data-pattern="aurora"] .mesh, html[data-pattern="aurora"] #stars, html[data-pattern="aurora"] .gridfx, html[data-pattern="aurora"] .grain{display:block}
    html[data-pattern="neon"] .neon-grid, html[data-pattern="neon"] .neon-laser, html[data-pattern="neon"] .gridfx, html[data-pattern="neon"] .grain{display:block}
    html[data-pattern="glass"] .glass-orbs, html[data-pattern="glass"] .gridfx, html[data-pattern="glass"] .grain{display:block}
    html[data-pattern="stripes"] .graphite-stripes, html[data-pattern="stripes"] .grain{display:block}
    html[data-pattern="plain"] .grain{display:block}
    .mesh{z-index:-5; filter:blur(50px) saturate(120%); opacity:.35; background:radial-gradient(60% 70% at 10% 20%, color-mix(in oklab, var(--accent) 80%, transparent), transparent 60%), radial-gradient(55% 60% at 85% 25%, color-mix(in oklab, var(--accent-2) 70%, transparent), transparent 62%), radial-gradient(65% 70% at 25% 85%, color-mix(in oklab, var(--accent) 60%, transparent), transparent 65%), radial-gradient(60% 70% at 95% 85%, color-mix(in oklab, var(--accent) 55%, transparent), transparent 62%); background-repeat:no-repeat; background-size:120% 120%; animation:meshMove 26s ease-in-out infinite alternate}
    @keyframes meshMove{0%{background-position:0% 0%,100% 0%,0% 100%,100% 100%}50%{background-position:10% 12%,90% 8%,12% 88%,86% 84%}100%{background-position:6% 18%,84% 16%,18% 78%,80% 90%}}
    #stars{z-index:-4; display:block; width:100%; height:100%}
    .neon-grid{z-index:-5; opacity:.32; background-image:linear-gradient(color-mix(in oklab, var(--accent) 22%, transparent) 1px, transparent 1px), linear-gradient(90deg, color-mix(in oklab, var(--accent-2) 22%, transparent) 1px, transparent 1px); background-size:26px 26px, 26px 26px; animation:gridPan 36s linear infinite}
    @keyframes gridPan{0%{background-position:0 0,0 0}100%{background-position:520px 0,0 520px}}
    .neon-laser{z-index:-4; background:linear-gradient(120deg, transparent 45%, color-mix(in oklab, var(--accent-2) 18%, transparent) 50%, transparent 55%), linear-gradient(-120deg, transparent 45%, color-mix(in oklab, var(--accent) 18%, transparent) 50%, transparent 55%); animation:laserSweep 9s linear infinite}
    @keyframes laserSweep{0%{background-position:-200% 0, 200% 0}100%{background-position:200% 0, -200% 0}}
    .glass-orbs{z-index:-5; filter:blur(60px) saturate(120%); opacity:.42}
    .glass-orbs::before, .glass-orbs::after{content:""; position:absolute; width:720px; height:720px; border-radius:50%; filter:blur(40px);} 
    .glass-orbs::before{left:-120px; top:-160px; background:radial-gradient(circle at 30% 30%, color-mix(in oklab, var(--accent) 90%, transparent), transparent 60%)}
    .glass-orbs::after{right:-160px; bottom:-160px; background:radial-gradient(circle at 70% 70%, color-mix(in oklab, var(--accent-2) 90%, transparent), transparent 60%)}
    .graphite-stripes{z-index:-5; opacity:.18; background-image:repeating-linear-gradient(135deg, rgba(255,255,255,.05) 0 2px, transparent 2px 10px)}
    .gridfx{z-index:-2; opacity:.06; mix-blend-mode:overlay; background-image:linear-gradient(transparent 95%, rgba(255,255,255,.25) 95%), linear-gradient(90deg, transparent 95%, rgba(255,255,255,.25) 95%); background-size:24px 24px,24px 24px; animation:gridShift 60s linear infinite}
    @keyframes gridShift{0%{background-position:0 0,0 0}100%{background-position:480px 0,0 480px}}
    .grain{z-index:-1; opacity:.06; mix-blend-mode:soft-light; background-image:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAACXBIWXMAAAsSAAALEgHS3X78AAABcElEQVR4nO2bvU7DQBCEZ6sQ4h2gE0w6kJ3gC5wBq0C4h+0K0FQyQvXgqQn9dD3Wg6gA2o8p9l3Zb3iV1lQe2k9nY8mQy6KQe3k+z9wE5rJwq7mXQqVwHXL4l0k6l9GQm3v0q0d7Q8q2N3wZ9s1c0Q3Y2m4G6wQJt0iHq3R8b5H5l8w7wqN3б5s8Qw2Vv3гqQ8aJr4Xk1xK7w0q2kQ3h1bZc9uУj6Ucn3vQmZ7sU8Qd1cZ3t1i8h6kKk3jQW5Qb5sC5d9wqF2cF7YQF3X1s2mQdZb0rCqR4vR2Zx9gXyqk+vRr8Q1e2k9b6J9n3j0q3n0v4c6Qyqf9b1oZ2r9b9m7E1m2vC0gS0f8eWb7g2u8t0J3n9bCj9m8Qp0cZ8a0Hf0m9w0x3Kq7wTg5+o9C8u7zq7I1qQvQxw7V1U1eQxXrQAAAABJRU5ErkJggg==')}
    html[data-palette="silver-light"] .gridfx{opacity:.08; mix-blend-mode:multiply; background-image:linear-gradient(#00000010 1px, transparent 1px), linear-gradient(90deg,#00000010 1px, transparent 1px)}
    html[data-palette="silver-light"] .grain{opacity:.04; mix-blend-mode:multiply}
    .hero{position:relative; padding:96px 0 40px; border-bottom:1px solid var(--line); background: radial-gradient(1200px 380px at 10% -10%, color-mix(in oklab, var(--accent) 18%, transparent), transparent 65%), radial-gradient(900px 300px at 110% 110%, color-mix(in oklab, var(--accent-2) 14%, transparent), transparent 60%), linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,0) 14%), linear-gradient(0deg, rgba(255,255,255,.015), rgba(255,255,255,0) 30%), var(--bg)}
    .hero::after{content:""; position:absolute; inset:-10px; pointer-events:none; border-radius:0 0 40px 40px; z-index:0; background:radial-gradient(120% 80% at 50% 10%, transparent 30%, rgba(0,0,0,.28) 100%)}
    .hero-grid{display:grid; grid-template-columns:1.2fr .8fr; gap:24px; align-items:center}
    .hero .lead{display:inline-block; color:var(--muted); font-weight:500; letter-spacing:.35px}
    .title{position:relative; z-index:1; font-weight:800; font-size:clamp(28px, 6vw, 56px); line-height:1.1; margin:.25em 0 .35em}
    .subtitle{position:relative; z-index:1; font-size:clamp(16px, 2.2vw, 20px); color:#c7cbd4; max-width:860px}
    .hero-cta{position:relative; z-index:1; display:flex; flex-wrap:wrap; gap:14px; margin:26px 0 0}
    .ghost{padding:14px 18px; border-radius:14px; border:1px dashed color-mix(in oklab, var(--line) 100%, transparent); color:color-mix(in oklab, var(--text) 84%, transparent)}
    .portrait-card{position:relative; border:1px solid var(--line); border-radius:18px; padding:10px; background:linear-gradient(180deg, color-mix(in oklab, var(--panel) 98%, transparent), color-mix(in oklab, var(--panel) 94%, transparent)); box-shadow:var(--shadow)}
    .portrait-wrap{position:relative; overflow:hidden; border-radius:18px; aspect-ratio:3/4; background:#0b0d10}
    .portrait{width:100%; height:100%; object-fit:cover; filter:saturate(108%)}
    .portrait-card::after{content:""; position:absolute; inset:-1px; border-radius:18px; pointer-events:none; background:linear-gradient(180deg, color-mix(in oklab, var(--accent) 12%, transparent), transparent 40%, color-mix(in oklab, var(--accent-2) 10%, transparent) 80%)}
    .portrait-badge{position:absolute; left:50%; bottom:12px; transform:translateX(-50%); display:flex; justify-content:center; gap:10px; align-items:center; padding:8px 12px; border-radius:999px; border:1px solid var(--line); backdrop-filter:blur(6px) saturate(120%); background:color-mix(in oklab, var(--panel) 76%, transparent)}
    .portrait-badge .txt{font:600 12px/1 Inter; letter-spacing:.3px; color:var(--muted)}
    .trust{display:grid; grid-template-columns:repeat(auto-fit,minmax(220px,1fr)); gap:14px; margin:34px 0 0}
    .kpi{background:linear-gradient(180deg, color-mix(in oklab, var(--panel) 96%, transparent), color-mix(in oklab, var(--panel) 100%, transparent)); border:1px solid var(--line); border-radius:16px; padding:18px 18px; box-shadow:var(--shadow)}
    .kpi .num{font:700 clamp(22px,3.2vw,28px)/1 Inter} .kpi .cap{color:var(--muted); font-size:13px; letter-spacing:.25px}
    .section{padding:70px 0; border-bottom:1px solid var(--line)} .h2{font:700 clamp(22px, 3.4vw, 32px)/1.2 Inter; margin:0 0 16px}
    .p{color:#cbd1db; max-width:860px} .grid{display:grid; gap:18px} .grid.cols-2{grid-template-columns:repeat(auto-fit,minmax(300px,1fr))} .grid.cols-3{grid-template-columns:repeat(auto-fit,minmax(260px,1fr))}
    .card{background:linear-gradient(180deg, color-mix(in oklab, var(--panel) 98%, transparent), color-mix(in oklab, var(--panel) 100%, transparent)); border:1px solid var(--line); border-radius:var(--radius); padding:22px; box-shadow:var(--shadow)}
    .card .card-title{font-weight:650; font-size:18px} .mono{font-family:"JetBrains Mono", ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace} .muted{color:var(--muted)}
    .story .wrap{display:grid; grid-template-columns:1.2fr .8fr; gap:18px; align-items:start} .story .lead{color:var(--muted)}
    .timeline{position:relative; padding:14px 14px 14px 0} .timeline::before{content:""; position:absolute; left:12px; top:14px; bottom:14px; width:2px; background:linear-gradient(180deg, color-mix(in oklab, var(--accent) 30%, transparent), color-mix(in oklab, var(--accent-2) 30%, transparent)); opacity:.45}
    #storyProgress{position:absolute; left:12px; top:14px; width:2px; height:0%; background:linear-gradient(180deg, var(--accent), var(--accent-2)); border-radius:2px; box-shadow:0 0 14px color-mix(in oklab, var(--accent) 40%, transparent)}
    .milestone{position:relative; margin:12px 0 12px 28px; padding:14px 16px; border:1px dashed var(--line); border-radius:14px; background:color-mix(in oklab, var(--panel) 96%, transparent)}
    .milestone::before{content:""; position:absolute; left:-26px; top:18px; width:12px; height:12px; border-radius:50%; background:var(--bg); border:2px solid var(--accent); box-shadow:0 0 0 4px color-mix(in oklab, var(--accent) 20%, transparent)}
    .milestone .when{font:600 12px/1.1 Inter; color:var(--muted); letter-spacing:.3px}
    .milestone .what{font-weight:650; margin:4px 0}
    .milestone .desc{color:#cbd1db}
    .chips{display:flex; flex-wrap:wrap; gap:6px; margin-top:8px}
    .chip{font:600 11px/1 Inter; letter-spacing:.3px; padding:6px 8px; border-radius:999px; border:1px solid var(--line); color:var(--muted); background:color-mix(in oklab, var(--panel) 92%, transparent)}
    .bars{display:grid; gap:10px} .bar{height:10px; border-radius:999px; border:1px solid var(--line); background:color-mix(in oklab, var(--panel) 90%, transparent); overflow:hidden} .bar i{display:block; height:100%; width:0%; background:linear-gradient(90deg, var(--accent), var(--accent-2)); transition:width 900ms ease}
    .story-cta{display:flex; flex-wrap:wrap; gap:12px; align-items:center; margin-top:14px}
    .field{display:grid; gap:6px; margin:10px 0} .label{font-size:12px; color:var(--muted)} .input, .number{padding:12px 12px; border-radius:12px; border:1px solid var(--line); background:color-mix(in oklab, var(--panel) 96%, transparent); color:var(--text)} .row{display:grid; grid-template-columns:repeat(auto-fit,minmax(180px,1fr)); gap:12px}
    .btn{display:inline-flex; align-items:center; gap:8px; padding:10px 14px; border-radius:12px; border:1px solid var(--line); background:linear-gradient(180deg, color-mix(in oklab, var(--panel) 98%, transparent), color-mix(in oklab, var(--panel) 92%, transparent)); color:var(--text); cursor:pointer}
    .stat{display:grid; gap:6px} .stat .v{font:700 20px/1 Inter}
    footer{padding:50px 0} .footer-grid{display:grid; gap:18px; grid-template-columns:1.5fr 1fr} .small{font-size:13px; color:var(--muted)}
    .reveal{opacity:0; transform:translateY(12px); transition:600ms ease} .reveal-visible{opacity:1; transform:none}
    @media (max-width:860px){ .hero-grid{grid-template-columns:1fr; gap:18px} }
    @media (max-width:640px){ .container{width:min(640px,94vw)} .hero{padding:76px 0 28px} .title{font-size:clamp(22px,9.5vw,36px)} .subtitle{font-size:15px} .card{padding:18px; border-radius:16px} }
    @media (prefers-reduced-motion: reduce){ .mesh,.gridfx,.neon-grid,.neon-laser{animation:none} #stars,.spot{display:none} .reveal{transition:none} .magnet{transition:none} }
    .switcher{position:fixed; right:16px; bottom:16px; z-index:80; display:flex; gap:10px; align-items:center; padding:10px 12px; border:1px solid var(--line); border-radius:14px; background:linear-gradient(180deg, color-mix(in oklab, var(--panel) 98%, transparent), color-mix(in oklab, var(--panel) 90%, transparent)); box-shadow:var(--shadow)}
    .switcher label{font-size:12px; color:var(--muted)} .select{appearance:none; -webkit-appearance:none; padding:8px 12px; border-radius:10px; border:1px solid var(--line); background:color-mix(in oklab, var(--panel) 96%, transparent); color:color-mix(in oklab, var(--text) 90%, transparent)} .switcher .row{display:flex; gap:8px; align-items:center}
    @media (max-width:540px){ .switcher{flex-direction:column; align-items:stretch} }
    @media (max-width:640px){ .switcher{ left:auto; right:calc(max(10px, env(safe-area-inset-right, 0px)) + 6px); bottom:calc(max(12px, env(safe-area-inset-bottom, 0px)) + 6px); width:clamp(200px, 45vw, 280px); padding:10px 12px; gap:10px } .switcher .row{ display:grid; grid-template-columns:max-content 1fr; column-gap:10px; align-items:center } .switcher label{ margin:0 } .switcher .select{ width:100% } }
    /* Hint bubble “пссс…” */
  .psst{position:fixed; z-index:90; background:linear-gradient(180deg, color-mix(in oklab, var(--panel) 98%, transparent), color-mix(in oklab, var(--panel) 92%, transparent)); border:1px solid var(--line); box-shadow:var(--shadow); border-radius:12px; padding:10px 12px; color:var(--text); display:flex; align-items:center; gap:8px; max-width:min(92vw, 520px)}
  .psst .x{margin-left:6px; border:0; background:transparent; color:var(--muted); cursor:pointer; font:700 14px/1 Inter}
  @media (max-width:540px){ .psst{padding:8px 10px; font-size:13px} }
</style>
</head>
<body>
  <div class="layer mesh" aria-hidden="true"></div>
  <canvas id="stars" class="layer" aria-hidden="true"></canvas>
  <div class="layer neon-grid" aria-hidden="true"></div>
  <div class="layer neon-laser" aria-hidden="true"></div>
  <div class="layer glass-orbs" aria-hidden="true"></div>
  <div class="layer graphite-stripes" aria-hidden="true"></div>
  <div class="layer gridfx" aria-hidden="true"></div>
  <div class="layer grain" aria-hidden="true"></div>

  <nav class="nav">
    <div class="container nav-inner">
      <a href="#top" class="logo" aria-label="На главную">
        <svg width="26" height="26" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><rect x="6" y="6" width="36" height="36" rx="12" fill="#0c1116" stroke="var(--line)"/><path d="M16 30l8-12 8 12" stroke="var(--accent)" stroke-width="2.6" stroke-linecap="round" stroke-linejoin="round"/></svg>
        <strong>Комил Султонов</strong>
        <span class="badge">Project Manager</span>
      </a>
      <button class="menu-toggle" aria-label="Меню" aria-expanded="false" onclick="toggleMenu(this)">
        <svg width="22" height="22" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18M3 12h18M3 18h18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
      </button>
      <div class="menu" id="menu">
        <a href="#services" onclick="closeMenu()">Сервисы</a>
        <a href="#cases" onclick="closeMenu()">Кейсы</a>
        <a href="#skills" onclick="closeMenu()">Навыки</a>
        <a href="#experience" onclick="closeMenu()">Опыт</a>
        <a href="#education" onclick="closeMenu()">Обучение</a>
        <a href="#story" onclick="closeMenu()">История</a>
        <a href="#lab" onclick="closeMenu()">Лаб</a>
        <a href="#contacts" onclick="closeMenu()">Контакты</a>
        <div class="lang-switch">
          <a href="./" hreflang="ru" lang="ru" class="active">RU</a>
          <span>•</span>
          <a href="./en/" hreflang="en" lang="en">EN</a>
        </div>
        <a class="cta magnet" href="#contacts" onclick="closeMenu()" onmousemove="btnHover(event)" onmouseleave="btnLeave(event)"><span class="dot"></span><span>Связаться</span></a>
      </div>
    </div>
  </nav>

  <header id="top" class="hero">
    <div class="container hero-grid">
      <div>
        <span class="lead">Ташкент • Узбекистан • Готов к переезду и редким командировкам</span>
        <h1 class="title">IT Project Manager (финтех, AI/ML, digital)</h1>
        <p class="subtitle">Управляю полным циклом проекта: от идеи и сбора требований до релиза и сопровождения. Платёжные интеграции (YooKassa, Payme), автоконвертация валют для СНГ, продуктовые метрики <span class="mono">DAU/MAU, retention, churn, ARPU, CR</span>. Считаю <span class="mono">LTV/ROAS/CPL/CPM</span> до запуска. Автоматизирую процессы на локальных AI‑моделях (DeepSeek R1, Stable Diffusion, Whisper/Vosk).</p>
        <div class="hero-cta">
          <a class="cta magnet" href="https://t.me/Ka_yooo_ma" target="_blank" rel="noopener" onmousemove="btnHover(event)" onmouseleave="btnLeave(event)"><span class="dot"></span><span>Написать в Telegram</span></a>
          <a class="ghost" href="#cv">Скачать резюме (PDF)</a>
        </div>
        <div class="trust">
          <div class="kpi reveal"><div class="num">5+ лет</div><div class="cap">Опыт управления и продакшена</div></div>
          <div class="kpi reveal"><div class="num">10 человек</div><div class="cap">Команды и подрядчики</div></div>
          <div class="kpi reveal"><div class="num">AI/ML</div><div class="cap">Автоматизация процессов</div></div>
          <div class="kpi reveal"><div class="num">Финтех</div><div class="cap">Платежи, конвертация</div></div>
        </div>
      </div>
      <aside class="portrait-card reveal" aria-label="Портрет">
        <div class="portrait-wrap">
          <img class="portrait" src="./assets/portrait.jpg" alt="Комил Султонов" loading="lazy" onerror="this.closest('.portrait-card').style.display='none'">
          <div class="portrait-badge"><span class="txt">Комил Султонов</span><span class="txt">Open to projects</span></div>
        </div>
      </aside>
    </div>
  </header>

  <section id="services" class="section">
    <div class="container">
      <h2 class="h2">Как помогаю как PM</h2>
      <p class="p">Довожу проекты до релиза: чёткие требования, прозрачные сроки, метрики, интеграции и порядок в процессах. Четыре зоны моей силы.</p>
      <div class="grid cols-4" style="margin-top:18px; grid-template-columns:repeat(auto-fit,minmax(220px,1fr))">
        <article class="card reveal"><div class="card-title">Планирование и контроль</div><ul class="muted"><li>Backlog, roadmap, релиз‑планы</li><li>Сроки, риски, приоритеты</li><li>Коммуникации со стейкхолдерами</li></ul></article>
        <article class="card reveal"><div class="card-title">Интеграции и архитектура</div><ul class="muted"><li>Платежи: YooKassa, Payme</li><li>Базы и API курсов валют</li><li>Документация и схемы</li></ul></article>
        <article class="card reveal"><div class="card-title">Продуктовые метрики</div><ul class="muted"><li>DAU/MAU, retention, churn</li><li>CR, ARPU, LTV, ROAS</li><li>Гипотезы и опыты</li></ul></article>
        <article class="card reveal"><div class="card-title">Процессы и AI</div><ul class="muted"><li>Agile/Scrum, Kanban</li><li>AI‑автоматизация, Python</li><li>CI простых инструментов</li></ul></article>
      </div>
    </div>
  </section>

  <section id="cases" class="section">
    <div class="container">
      <h2 class="h2">Кейс: WatchWithNoHands (финтех + AI)</h2>
      <p class="p">Подписочная система, платежи, рефпрограмма и Telegram‑бот как интерфейс. От требований и архитектуры — до релизов и сопровождения. Встроена система метрик и отчётности.</p>
      <div class="grid cols-2" style="margin-top:18px">
        <div class="card reveal"><div class="card-title">Моя роль</div><ul class="muted"><li>Сбор требований, декомпозиция задач</li><li>План релизов, управление рисками</li><li>Синк разработки, тестирования, маркетинга</li></ul></div>
        <div class="card reveal"><div class="card-title">Технологии/среды</div><div class="mono small">Python (aiogram 3.x, APScheduler), VS Code, Java, JavaScript, GitHub, Asana, YooKassa/Payme, aiosqlite, валютные API, локальные AI‑модели (DeepSeek R1, SD, Whisper/Vosk)</div></div>
      </div>
    </div>
  </section>

  <section id="skills" class="section">
    <div class="container">
      <h2 class="h2">Навыки</h2>
      <div class="grid cols-3" style="margin-top:8px">
        <div class="card reveal"><div class="card-title">Управление проектами</div><p class="muted">Agile, Scrum, Kanban, Waterfall, SLA, User Flow, планирование бюджета, Jira/Confluence, Asana.</p></div>
        <div class="card reveal"><div class="card-title">Технологии</div><p class="muted">Python, Java, JavaScript, GitHub, Telegram‑боты, интеграции API, SQLite/PostgreSQL, AI/ML (автоматизация контента и процессов).</p></div>
        <div class="card reveal"><div class="card-title">Маркетинг/продакшен</div><p class="muted">SMM, контекст, таргетинг, 3D/Motion (Blender), креативы под перфоманс.</p></div>
        <div class="card reveal" style="margin-top:18px"><div class="card-title">Языки</div><p class="muted">Русский — родной · Узбекский — C1 · Английский — B2 (IELTS 6.5)</p></div>
      </div>
    </div>
  </section>

  <section id="experience" class="section">
    <div class="container">
      <h2 class="h2">Опыт</h2>
      <div class="grid cols-2" style="margin-top:6px">
        <div class="card reveal"><div class="card-title">WatchWithNoHands — Project Manager</div><p class="small muted">Июнь 2024 — н.в. · Ташкент</p><ul class="muted"><li>Полный цикл: требования → релиз → сопровождение</li><li>Платёжные интеграции, валюты СНГ, автоконвертация</li><li>Метрики продукта и маркетинга, отчётность</li></ul></div>
        <div class="card reveal"><div class="card-title">AGAT Credit — Ведущий SMM / PM</div><p class="small muted">Сентябрь 2023 — Июнь 2024 · Ташкент</p><ul class="muted"><li>Команда до 10 человек и подрядчики</li><li>Снижение CPL на 15%, рост конверсии на 18%</li><li>Бюджет, сроки, договоры</li></ul></div>
        <div class="card reveal"><div class="card-title">Fiverr — 3D Motion Designer / Project Lead</div><p class="small muted">Июнь 2020 — Август 2023</p><p class="muted">Управление проектами для клиентов из Румынии, Индии, Нигерии, США. 3D‑анимации в Blender.</p></div>
        <div class="card reveal"><div class="card-title">Mirvalino Industries — SMM‑менеджер</div><p class="small muted">Октябрь 2021 — Май 2023</p><p class="muted">Контент‑план, креативы, таргет, анализ рынка, бухгалтерия.</p></div>
      </div>
    </div>
  </section>

  <section id="education" class="section">
    <div class="container">
      <h2 class="h2">Образование и сертификаты</h2>
      <div class="grid cols-2" style="margin-top:8px">
        <div class="card reveal"><div class="card-title">Образование</div><ul class="muted"><li>Нац. университет им. Мирзо Улугбека — Экономика/HR (ожидается 2026)</li><li>Школа №178</li></ul></div>
        <div class="card reveal"><div class="card-title">Курсы и сертификаты</div><ul class="muted"><li>PMI: Fundamentals of Predictive Project Management (2024)</li><li>ChatGPT для бизнеса и рекламы (2024)</li><li>Нейросети для маркетолога (2024)</li><li>Автоматизация 2.0 — AI‑сотрудники (2024)</li><li>Udemy: Google Ads (2024)</li><li>Skillshare: Advanced/Product 3D Animation (2023)</li><li>IELTS 6.5</li></ul></div>
      </div>
    </div>
  </section>

  <section id="story" class="section story">
    <div class="container">
      <h2 class="h2">Моя история: от внутренней дисциплины к продуктам</h2>
      <p class="p">Десять лет пути в двух главах. Сначала — фундамент: системное мышление, дисциплина и личные принципы управления. Затем — практика: продукты и проекты, платежи и интеграции, метрики и автоматизация.</p>
      <div class="wrap">
        <div class="card reveal timeline">
          <div id="storyProgress" aria-hidden="true"></div>
          <div class="milestone"><div class="when">Глава 1 — Первые 5 лет — Фундамент</div><div class="what">От хаоса к системе</div><div class="desc">Работа с вниманием и дисциплиной. Формирование своей управленческой оптики: как ставить цели, раскладывать задачи и проверять гипотезы. Изучение моделей бизнеса и процессов — чтобы понимать, как устроены механики роста и выпуска релизов.</div><div class="chips"><span class="chip">ежедневные практики</span><span class="chip">принципы/рамки</span><span class="chip">системное мышление</span></div></div>
          <div class="milestone"><div class="when">Развилки</div><div class="what">Терял ориентиры — возвращался сильнее</div><div class="desc">Несколько раз приходилось останавливаться и переосмысливать курс. Каждый раз — возврат к базовым ценностям и обновлённый план действий.</div><div class="chips"><span class="chip">рефрейминг</span><span class="chip">антихрупкость</span><span class="chip">фокус</span></div></div>
          <div class="milestone"><div class="when">Глава 2 — Следующие 5 лет — Практика</div><div class="what">Применение знаний в реальном мире</div><div class="desc">IT‑проекты и продукты: управление релизами, декомпозиция и планирование. Платёжные интеграции (YooKassa/Payme), валюты СНГ, архитектура, Telegram‑бот как интерфейс. Настройка продуктовых метрик и отчётности, синк команды и подрядчиков.</div><div class="chips"><span class="chip">релизы 0→1</span><span class="chip">платёжные интеграции</span><span class="chip">AI‑автоматизация</span></div></div>
          <div class="milestone"><div class="when">Сегодня</div><div class="what">Чёткое видение и спокойная скорость</div><div class="desc">Соединяю стратегию, процессы и код — от идеи до устойчивой системы и метрик.</div></div>
        </div>
        <div class="card reveal">
          <div class="card-title">Визуально: чем я становился сильнее</div>
          <div class="small muted" style="margin-bottom:8px">Шкалы заполняются при прокрутке</div>
          <div class="bars">
            <div class="label">Планирование и дисциплина</div>
            <div class="bar"><i data-w="92"></i></div>
            <div class="label" style="margin-top:8px">Бизнес‑мышление (модели/стратегии)</div>
            <div class="bar"><i data-w="88"></i></div>
            <div class="label" style="margin-top:8px">Практика (релизы, интеграции)</div>
            <div class="bar"><i data-w="90"></i></div>
          </div>
          <div class="story-cta"><span class="muted">Готов применить эти навыки под ваши метрики.</span>
            <a class="cta magnet" href="https://t.me/Ka_yooo_ma" target="_blank" rel="noopener" onmousemove="btnHover(event)" onmouseleave="btnLeave(event)"><span class="dot"></span><span>Обсудить задачу в Telegram</span></a>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section id="lab" class="section">
    <div class="container">
      <h2 class="h2">Lab: быстрые утилиты PM</h2>
      <p class="p">Мои рабочие мини‑инструменты: помогают быстро прикинуть метрики, расставить приоритеты и оценить эффект гипотез.</p>
      <div class="card reveal" style="margin-top:18px">
        <div class="card-title">1) Метрики продукта: Stickiness и LTV</div>
        <div class="row">
          <label class="field"><span class="label">DAU</span><input id="mDau" class="number" type="number" min="0" step="100" value="12000"></label>
          <label class="field"><span class="label">MAU</span><input id="mMau" class="number" type="number" min="0" step="100" value="65000"></label>
          <label class="field"><span class="label">ARPU, ₽/мес</span><input id="mArpu" class="number" type="number" min="0" step="10" value="390"></label>
          <label class="field"><span class="label">Маржинальность, %</span><input id="mMargin" class="number" type="number" min="0" max="100" step="1" value="60"></label>
          <label class="field"><span class="label">Churn/месяц, %</span><input id="mChurn" class="number" type="number" min="0" max="100" step="0.1" value="7.5"></label>
          <label class="field"><span class="label">CAC, ₽</span><input id="mCac" class="number" type="number" min="0" step="10" value="1200"></label>
        </div>
        <div class="row">
          <div class="stat"><span class="label">Stickiness</span><span id="mStick" class="v">—</span></div>
          <div class="stat"><span class="label">LTV, ₽</span><span id="mLtv" class="v">—</span></div>
          <div class="stat"><span class="label">LTV/CAC</span><span id="mRatio" class="v">—</span></div>
        </div>
      </div>
      <div class="card reveal" style="margin-top:18px">
        <div class="card-title">2) ICE‑приоритизация гипотез</div>
        <form id="iceForm" class="row" style="align-items:end">
          <label class="field" style="grid-column:1/-1"><span class="label">Гипотеза</span><input id="iceName" class="input" placeholder="Например: Упростить KYC по шагам"/></label>
          <label class="field"><span class="label">Impact (1–5)</span><input id="iceI" class="number" type="number" min="1" max="5" value="4"></label>
          <label class="field"><span class="label">Confidence (1–5)</span><input id="iceC" class="number" type="number" min="1" max="5" value="3"></label>
          <label class="field"><span class="label">Ease (1–5)</span><input id="iceE" class="number" type="number" min="1" max="5" value="4"></label>
          <button class="btn" type="submit">Добавить</button>
          <button class="btn" type="button" id="iceReset">Сбросить</button>
        </form>
        <div id="iceList" class="mono small" style="margin-top:12px"></div>
      </div>
      <div class="card reveal" style="margin-top:18px">
        <div class="card-title">3) Прогноз удержания (cohort)</div>
        <div class="row">
          <label class="field"><span class="label">Новых пользователей</span><input id="rStart" class="number" type="number" min="0" step="100" value="10000"></label>
          <label class="field"><span class="label">Retention/мес, %</span><input id="rRet" class="number" type="number" min="0" max="100" step="0.5" value="85"></label>
          <label class="field"><span class="label">Горизонт, мес.</span><input id="rMonths" class="number" type="number" min="1" max="12" step="1" value="6"></label>
        </div>
        <div id="retTable" class="mono small" style="margin-top:12px"></div>
      </div>
    </div>
  </section>

  <section id="contacts" class="section">
    <div class="container">
      <h2 class="h2">Контакты</h2>
      <div class="grid cols-2" style="margin-top:12px">
        <div class="card reveal">
          <div class="card-title">Связаться со мной</div>
          <p class="p">Обсудим цели, ограничения и план релиза.</p>
          <div style="display:flex; gap:12px; flex-wrap:wrap; margin:10px 0 14px">
            <a class="cta magnet" href="https://t.me/Ka_yooo_ma" target="_blank" rel="noopener" onmousemove="btnHover(event)" onmouseleave="btnLeave(event)"><span class="dot"></span><span>Написать в Telegram</span></a>
          </div>
          <div class="input" style="margin:8px 0">kamasultanov8@gmail.com</div>
          <div class="input" style="margin:8px 0">+998 (88) 111‑66‑12</div>
          <div class="small muted" style="margin-top:6px">Ташкент, Узбекистан</div>
        </div>
        <div id="cv" class="card reveal">
          <div class="card-title">Резюме (PDF)</div>
          <p class="p">Скачать полную версию резюме.</p>
          <a class="cta magnet" id="resumeLink" href="./assets/Султонов К.Г. Руководитель проектов.pdf" type="application/pdf" download onmousemove="btnHover(event)" onmouseleave="btnLeave(event)"><span class="dot"></span><span>Скачать PDF</span></a>
        </div>
      </div>
    </div>
  </section>

  <footer>
    <div class="container footer-grid">
      <div>
        <strong>Комил Султонов</strong>
        <p class="small">IT Project Manager. Финтех, AI/ML. Управляю релизами, интеграциями и продуктовой аналитикой.</p>
      </div>
      <div class="small">© 2025 Комил Султонов.</div>
    </div>
  </footer>

  <script>
    // ====== UI helpers used in HTML attributes ======
    function toggleMenu(btn){ const m=document.getElementById('menu'); if(!m) return; const open=!m.classList.contains('open'); m.classList.toggle('open', open); document.body.classList.toggle('menu-open', open); if(btn) btn.setAttribute('aria-expanded', String(open)); }
    function closeMenu(){ const m=document.getElementById('menu'); if(!m) return; m.classList.remove('open'); document.body.classList.remove('menu-open'); }
    function btnHover(e){ const r=e.currentTarget.getBoundingClientRect(); const x=((e.clientX-r.left)/r.width*100).toFixed(2)+'%'; e.currentTarget.style.setProperty('--mx', x); }
    function btnLeave(e){ // сбрасываем hover-эффект на CTA-кнопках
      const el = e && (e.currentTarget || e.target); if(el && el.style) el.style.removeProperty('--mx');
    }

    // ====== Reveal on scroll ======
    const revObs=new IntersectionObserver((ents)=>{ ents.forEach(ent=>{ if(ent.isIntersecting){ ent.target.classList.add('reveal-visible'); revObs.unobserve(ent.target);} }); }, {threshold:.18});
    document.querySelectorAll('.reveal').forEach(el=>revObs.observe(el));

    // ====== Story progress bar ======
    const storyEl=document.getElementById('story'); const storyProgress=document.getElementById('storyProgress');
    function updateStoryProgress(){ if(!storyEl||!storyProgress) return; const r=storyEl.getBoundingClientRect(); const total=r.height+innerHeight; const passed=Math.min(Math.max(innerHeight-r.top,0), total); const ratio=passed/total; storyProgress.style.height=(ratio*100).toFixed(2)+'%'; }
    updateStoryProgress(); addEventListener('scroll', updateStoryProgress, {passive:true}); addEventListener('resize', updateStoryProgress);

    // ====== Stars canvas (simple + lightweight) ======
    (function(){ const c=document.getElementById('stars'); if(!c) return; const ctx=c.getContext('2d'); let dpr=Math.min(devicePixelRatio||1,2);
      function resize(){ const w=innerWidth, h=innerHeight; c.width=w*dpr; c.height=h*dpr; c.style.width=w+'px'; c.style.height=h+'px'; ctx.setTransform(dpr,0,0,dpr,0,0);} resize(); addEventListener('resize', resize);
      const N=140; const S=Array.from({length:N},()=>({x:Math.random()*innerWidth,y:Math.random()*innerHeight,s:Math.random()*1.2+0.3,a:Math.random()*0.5+0.25,vx:(Math.random()-.5)*.35,vy:(Math.random()-.5)*.35}));
      (function tick(){ ctx.clearRect(0,0,innerWidth,innerHeight); ctx.fillStyle='#fff'; for(const p of S){ p.x+=p.vx; p.y+=p.vy; if(p.x<0)p.x+=innerWidth; if(p.x>innerWidth)p.x-=innerWidth; if(p.y<0)p.y+=innerHeight; if(p.y>innerHeight)p.y-=innerHeight; ctx.globalAlpha=p.a; ctx.beginPath(); ctx.arc(p.x,p.y,p.s,0,6.283); ctx.fill(); } ctx.globalAlpha=1; requestAnimationFrame(tick); })(); })();

    // ====== Bars fill when visible ======
    const barObserver=new IntersectionObserver((ents)=>{ ents.forEach(ent=>{ if(ent.isIntersecting){ const i=ent.target; const w=i.dataset.w||0; requestAnimationFrame(()=> i.style.width=w+'%'); barObserver.unobserve(i);} }); }, {threshold:.35});
    document.querySelectorAll('#story .bar i[data-w]').forEach(i=>barObserver.observe(i));

    // ====== Lab: metrics calc ======
    const MET={ dau:el('mDau'), mau:el('mMau'), arpu:el('mArpu'), margin:el('mMargin'), churn:el('mChurn'), cac:el('mCac'), out:{ stick:el('mStick'), ltv:el('mLtv'), ratio:el('mRatio') } };
    function el(id){ return document.getElementById(id) }
    function fmt(n){ return isFinite(n)? Math.round(n).toLocaleString('ru-RU') : '—' }
    function recalcMET(){ if(!MET.dau) return; const dau=+MET.dau.value||0; const mau=+MET.mau.value||1; const arpu=+MET.arpu.value||0; const margin=(+MET.margin.value||0)/100; const churn=(+MET.churn.value||0)/100; const cac=+MET.cac.value||0; const stick=Math.min(dau/mau*100, 999); const ltv= churn>0 ? (arpu*margin)/churn : 0; const ratio= cac>0 ? ltv/cac : 0; MET.out.stick.textContent=stick.toFixed(1)+'%'; MET.out.ltv.textContent=fmt(ltv); MET.out.ratio.textContent= ratio? ratio.toFixed(2) : '—'; }
    ['mDau','mMau','mArpu','mMargin','mChurn','mCac'].forEach(id=>{ const n=el(id); if(n) n.addEventListener('input', recalcMET);}); recalcMET();

    // ====== Lab: ICE ======
    (function(){ const form=document.getElementById('iceForm'); const list=document.getElementById('iceList'); if(!form||!list) return; const KEY='iceItems';
      function load(){ try{return JSON.parse(localStorage.getItem(KEY)||'[]')}catch(_){return []} }
      function save(v){ localStorage.setItem(KEY, JSON.stringify(v)); }
      function render(){ const items=load().sort((a,b)=> b.score-a.score); list.innerHTML = items.length? items.map((it,i)=>`${i+1}. [${it.score.toFixed(1)}] ${it.name} — I:${it.i} · C:${it.c} · E:${it.e}`).join('<br>') : '<span class="muted">Пока пусто. Добавьте первую гипотезу выше.</span>'; }
      form.addEventListener('submit', (e)=>{ e.preventDefault(); const name=document.getElementById('iceName').value.trim(); const i=+document.getElementById('iceI').value||1; const c=+document.getElementById('iceC').value||1; const eV=+document.getElementById('iceE').value||1; if(!name) return; const score=(i*c*eV)/125*100; const items=load(); items.push({name,i,c,e:eV,score}); save(items); render(); form.reset(); document.getElementById('iceI').value=4; document.getElementById('iceC').value=3; document.getElementById('iceE').value=4; });
      document.getElementById('iceReset').addEventListener('click', ()=>{ localStorage.removeItem(KEY); render(); });
      render();
    })();

    // ====== Lab: retention ======
    (function(){ const s=el('rStart'), r=el('rRet'), m=el('rMonths'), out=el('retTable'); if(!s||!r||!m||!out) return; function render(){ const start=+s.value||0; const rr=(+r.value||0)/100; const months=Math.max(1,Math.min(+m.value||1,24)); let alive=start; const rows=[]; for(let i=1;i<=months;i++){ alive=Math.round(alive*rr); const churn=start-alive; rows.push(`${i} мес: активны ${alive.toLocaleString('ru-RU')} • ушли ${churn.toLocaleString('ru-RU')}`); } out.innerHTML=rows.join('<br>'); } [s,r,m].forEach(n=>n.addEventListener('input', render)); render(); })();

    // ====== Tiny runtime tests (do not modify existing code) ======
    (function runTests(){ const results=[]; try{ results.push(['closeMenu exists', typeof closeMenu==='function']); }catch(e){ results.push(['closeMenu exists', false]); }
      try{ results.push(['btnLeave exists', typeof btnLeave==='function']); }catch(e){ results.push(['btnLeave exists', false]); }
      try{ const m=document.getElementById('menu'); if(m){ m.classList.add('open'); closeMenu(); results.push(['closeMenu closes menu', !m.classList.contains('open')]); } }
      catch(e){ results.push(['closeMenu closes menu', false]); }
      try{ const tmp=document.createElement('a'); tmp.style.setProperty('--mx','10%'); document.body.appendChild(tmp); btnLeave({currentTarget:tmp, target:tmp}); const ok = !tmp.style.getPropertyValue('--mx'); results.push(['btnLeave removes --mx', ok]); tmp.remove(); } catch(e){ results.push(['btnLeave removes --mx', false]); }
      console.groupCollapsed('Self‑tests'); results.forEach(([name,ok])=> console.log(ok? '✅':'❌', name)); console.groupEnd();
    })();
  </script>
</body>
</html>
